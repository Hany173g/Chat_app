<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= pageTitle %></title>
    <link rel="icon" type="image/png" href="/logo.png">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f5f5f5;
            font-family: Arial, sans-serif;
        }
        .profile-card {
            background-color: #fff;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .profile-img {
            width: 150px;
            height: 150px;
            object-fit: cover;
            border-radius: 50%;
            border: 3px solid #007bff;
        }
        .profile-info h3 {
            font-weight: bold;
        }
    </style>
</head>
<body>
          <%- include('parts/navbar') %>
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-12 col-md-8 profile-card text-center">
            <div class="row align-items-center">
                <div class="col-12 col-md-4 mb-3 mb-md-0">
                    <img src="/<%= userImage %>" alt="User Image" class="profile-img mx-auto d-block">
                </div>
                <div class="col-12 col-md-8 profile-info">
                    
                    <h3><%= username %></h3>
                    <% if(!isOwner)  {%>
                        <form method="post" id="friendsForm">
                            <input  id = "myId" type="hidden" name="myId" value="<%= myId %>">
                            <input id = "myName" type="hidden" name="myName" value="<%= myName %>">
                            <input id = "myImage" type="hidden" name="myImage" value="<%= myImage %>">
                            <input id ="friendId" type="hidden" name="friendId" value="<%= friendID %>">
                            <input id = "friendImage" type="hidden" name="friendImage" value="<%= userImage %>">
                            <input id = "friendName" type="hidden" name="friendName" value="<%= username%>">
                        <div>
                            
                            <% if(isFriends) {%>
                             <input type="submit" value="Delete Freind" class="btn btn-danger" formaction="/friend/delete">
                                 
                            <% } else if(isFriendsRequest) {%>
                              
                                 <input type="submit" value="Cancel Request" class="btn btn-danger" formaction="/friend/cancel">
                            <% }  else if(sentRequest) {%>

                               <input type="submit" value="Accept" class="btn btn-success" formaction="/friend/accept">
                               <input type="submit" value="Reject" class="btn btn-danger" formaction="/friend/reject">
                            <% }else {%>
                               <input id="addBtn" type="submit" value="Add Friend" class="btn btn-primary">
                            <%  }%>
                                 <% } else{%>
                          <p class="btn btn-success">مرحبا بك في صفحتك الشخصية!</p>
                          
                  <% } %>
                        </div>
               
                  </form>
                </div>
                
            </div>
            
        </div>
    </div>
</div>

<%- include('parts/scripts') %>
<script src="/socket.io/socket.io.js"></script>
<script src="/js/sockets/init.js"></script>
<% if(!isOwner && !isFriends && !isFriendsRequest && !sentRequest){ %>
<script src="/js/sockets/friend.js"></script>

<% } %>
</body>
</html>